<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Working on it</title>
<script src="jquery-2.1.4.min.js" type="application/javascript" language="javascript"></script>

<style type="text/css">
/***********************************************
**
** Sup. Andrew Rib here. Enjoy. 
**
**
**
************************************************/

@font-face {
	font-family:'ColorsOfAutumn';
	src:url("ColorsOfAutumn.ttf");
}

.customFont
{
	font-family: 'ColorsOfAutumn';
}

.dbFetch
{
	width:200px;
	overflow:ellipsis;
	word-break:break-all;
	line-height:10px;
	height:20px;
	padding:6px 6px 6px 6px;
	background-color:#FFF;
	border:thin #CCC solid;
	font-size:10px;
	float:left;
}

</style>

</head>

<body style="background-color:#000;">
<audio id="click1" src="sound/click1.wav"></audio>

<!--
<h3 style="color:#FFF; font-size:50pt;">I'm working on it...</h3>
-->

<!--<div style="position:absolute;top:125px; ;left:50%; transform:translate(-50%, 0%);  width:600; height:540; pointer-events: none;"><img style="pointer-events:none;" src="cover.fw.png" width="600" height="540" /></div>-->

<div style="text-align:center;">
	<h3 class="customFont" style="color:#FFF; font-size:50pt; margin-bottom:10px;text-shadow: 0 0 0.2em #F87, 0 0 0.2em #F87;">speak the truth:</h3>
</div>

<!-- Top bar -->
<div style="background-color:#0F0; width:600px; height:20px; margin:0 auto; clear:both;">
    <div id="box1" style="background-color:#C6C; width:50px; height:21px; float:left;"></div>
    <div id="box2" style="background-color:#C99;width:50px; height:21px; float:left; "></div>
    <div id="box3" style="background-color:#C99;width:50px; height:21px; float:left; "></div>
    <div id="box4" style="background-color:#C99;width:50px; height:21px; float:left; "></div>
    <div id="box5" style="background-color:#C99;width:50px; height:21px; float:left; "></div>
    <div id="box6" style="background-color:#C99;width:50px; height:21px; float:left; "></div>
    <div id="box7" style="background-color:#C99;width:50px; height:21px; float:left; "></div>
    <div id="box8" style="background-color:#C99;width:50px; height:21px; float:left; "></div>
    <div id="box9" style="background-color:#C99;width:50px; height:21px; float:left; "></div>
    <div id="box10" style="background-color:#C99;width:50px; height:21px; float:left; "></div>
    <div id="box11" style="background-color:#C99;width:50px; height:21px; float:left; "></div>
    <div id="box12" style="background-color:#C99;width:50px; height:21px; float:left; "></div>
</div>

<!-- I just got a mechanical keyboard. I gladly typed all this simply because it is so enjoyable. -->

<div style="width:600px; margin:0 auto; clear:left;">
	<!-- Left bar -->
    <div style="background-color:#F90; float:left; width:50px; height:227px;">
        <div id="box36" style="background-color:#C6C; width:50px; height:21px;"></div>
        <div id="box35" style="background-color:#C99;width:50px; height:21px; "></div>
        <div id="box34" style="background-color:#C99;width:50px; height:21px; "></div>
        <div id="box33" style="background-color:#C99;width:50px; height:21px; "></div>
        <div id="box32" style="background-color:#C99;width:50px; height:21px; "></div>
        <div id="box31" style="background-color:#C99;width:50px; height:21px; "></div>
        <div id="box30" style="background-color:#C99;width:50px; height:21px; "></div>
        <div id="box29" style="background-color:#C99;width:50px; height:20px; "></div>
        <div id="box28" style="background-color:#C99;width:50px; height:20px; "></div>
        <div id="box27" style="background-color:#C99;width:50px; height:20px; "></div>
        <div id="box26" style="background-color:#C99;width:50px; height:20px; "></div>
    </div>

    <div style="margin:0 auto; width:500px; float:left;">
        <textarea id="textIn" onchange="playClickSound()" onkeydown="playClickSound()" onfocus="goCrazy()" placeholder="Enter positive words here  ...........(140 chars)" 
            style="width:494px; height: 200px;margin:0 auto; font-size:32px;" maxlength="140"></textarea>
    </div>
    
    
	<!-- Right Bar -->
    <div style="background-color:#F90; float:left; width:50px; height:200px;">
        <div id="box13" style="background-color:#C6C; width:50px; height:21px;"></div>
        <div id="box14" style="background-color:#C99;width:50px; height:21px; "></div>
        <div id="box15" style="background-color:#C99;width:50px; height:21px; "></div>
        <div id="box16" style="background-color:#C99;width:50px; height:21px; "></div>
        <div id="box17" style="background-color:#C99;width:50px; height:21px; "></div>
        <div id="box18" style="background-color:#C99;width:50px; height:21px; "></div>
        <div id="box19" style="background-color:#C99;width:50px; height:21px; "></div>
        <div id="box20" style="background-color:#C99;width:50px; height:20px; "></div>
        <div id="box21" style="background-color:#C99;width:50px; height:20px; "></div>
        <div id="box22" style="background-color:#C99;width:50px; height:19px; "></div>
        <div id="box23" style="background-color:#9C0;width:50px; height:21px;  "></div>
    </div>


    <!-- Bottom Bar -->
    <div style="margin:0 auto; width:500px; float:left;" >
    
        <div style="display:table-row; width:500px;">
            
            <div id="box25" style="width:50px; height:20px; background-color:#F00; display:table-cell;"></div>
            
            <div style="display:table-cell; width:400px;">
                <button onclick="submitPost()" style="width:400px;">Speak</button>
            </div>
            
            <div id="box24"  style="width:50px; height:20px; background-color:#F00; display:table-cell;"></div>
        
        </div>
    </div>
    
    
</div>

<br />

<div id="dbFetches" style=" width:90%; margin:0 auto; clear:both; padding-top:10px; opacity:60%;">
</div>


<script type="text/javascript" language="javascript">

// A lot of function side effects here. Stay clear kids. 
// This was the most logical way for me to do this task-- or at least most natural for me. 

var baseIncrementCounter = 0;
var areWeCrazy = false;
var frequency = .1;

var counterIncrementFunction = function( counterValue ){
	return Math.log( counterValue );
}

var maxBaseIncrement = 27;

// For fluid motion back and forth. 
var boolGoingDown = false; // Are we incrementing or decrementing the base counter. 


/***** Color Sequences ******/
function funckyMultiColorWalk( i)
{
	/*	var red   =  Math.floor(Math.sin( (frequency * i )  + baseIncrementCounter + 4 * i  ) * 127 + 128);
	var green =  Math.floor(Math.sin((frequency  * i )  + baseIncrementCounter + 2 * i  ) * 127 + 128);
	var blue  = Math.floor( Math.sin((frequency  * i )   + baseIncrementCounter + 0 * i) * 127 + 128);
	
	//alert( "rgb("+red+","+green+","+blue+")" );
	document.getElementById("box"+i).style.backgroundColor = "rgb("+(red-100)+","+(green-100)+","+(blue-100)+")";	
	document.getElementById("box"+i).style.boxShadow = -4+"px "+1+"px "+50+"px " + "rgb("+(red-100)+","+(green-100)+","+(blue-100)+")";
	*/
	var red   =  Math.floor(Math.sin( (frequency * i )  + baseIncrementCounter + 4  ) * 127 + 128);
	var green =  Math.floor(Math.sin((frequency  * i )  + baseIncrementCounter + 2   ) * 127 + 128);
	var blue  = Math.floor( Math.sin((frequency  * i )   + baseIncrementCounter + 0 ) * 127 + 128);
	
	//alert( "rgb("+red+","+green+","+blue+")" );
	dbFetches[i].style.backgroundColor = "rgb("+(red-100)+","+(green-100)+","+(blue-100)+")";	
	dbFetches[i].style.boxShadow = -4+"px "+1+"px "+50+"px " + "rgb("+(red-100)+","+(green-100)+","+(blue-100)+")";
}

function normalRainbowWalk( i )
{
	var red   =  Math.floor(Math.sin( (frequency * i )  + baseIncrementCounter + 4  ) * 127 + 128);
	var green =  Math.floor(Math.sin((frequency  * i )  + baseIncrementCounter + 2   ) * 127 + 128);
	var blue  = Math.floor( Math.sin((frequency  * i )   + baseIncrementCounter + 0 ) * 127 + 128);
	
	//alert( "rgb("+red+","+green+","+blue+")" );
	document.getElementById("box"+i).style.backgroundColor = "rgb("+(red-100)+","+(green-100)+","+(blue-100)+")";	
	document.getElementById("box"+i).style.boxShadow = -4+"px "+1+"px "+50+"px " + "rgb("+(red-100)+","+(green-100)+","+(blue-100)+")";
}

function coolBlend2( i )
{
	var red   = Math.floor(Math.sin( (frequency * i ) + baseIncrementCounter + i ) * 127 + 128);
	var green = Math.floor(Math.sin( (frequency  ) + baseIncrementCounter ) * 127 + 128);
	var blue  = Math.floor(Math.sin( (frequency  ) + baseIncrementCounter) * 127 + 128);
	
	//alert( "rgb("+red+","+green+","+blue+")" );
	document.getElementById("box"+i).style.backgroundColor = "rgb("+(red-100)+","+(green-100)+","+(blue-100)+")";	
	document.getElementById("box"+i).style.boxShadow = -4+"px "+1+"px "+50+"px " + "rgb("+(red-100)+","+(green-100)+","+(blue-100)+")";
}


function coolBlend( i ,  baseIncrementCounter)
{
	var red   = Math.floor(Math.sin( (frequency * i ) + baseIncrementCounter + i) * 127 + 128);
	var green = Math.floor(Math.sin( (frequency * i ) + baseIncrementCounter ) * 127 + 128);
	var blue  = Math.floor(Math.sin( (frequency * i ) + baseIncrementCounter) * 127 + 128);
	
	//alert( "rgb("+red+","+green+","+blue+")" );
	document.getElementById("box"+i).style.backgroundColor = "rgb("+(red-100)+","+(green-100)+","+(blue-100)+")";	
	document.getElementById("box"+i).style.boxShadow = -4+"px "+1+"px "+50+"px " + "rgb("+(red-100)+","+(green-100)+","+(blue-100)+")";
}


function normalRainbow( i )
{
	var red   =  Math.floor(Math.sin( (frequency  )  + baseIncrementCounter + 4  ) * 127 + 128);
	var green =  Math.floor(Math.sin((frequency   )  + baseIncrementCounter + 2   ) * 127 + 128);
	var blue  = Math.floor( Math.sin((frequency   )   + baseIncrementCounter + 0 ) * 127 + 128);
	
	//alert( "rgb("+red+","+green+","+blue+")" );
	document.getElementById("box"+i).style.backgroundColor = "rgb("+(red-100)+","+(green-100)+","+(blue-100)+")";	
	document.getElementById("box"+i).style.boxShadow = -4+"px "+1+"px "+50+"px " + "rgb("+(red-100)+","+(green-100)+","+(blue-100)+")";
}


function misc( i )
{
	var red   =  Math.floor(Math.sin( (frequency /i )  + i * baseIncrementCounter + 4  ) * 127 + 128);
	var green =  Math.floor(Math.sin((frequency  /i )  + 2  ) * 127 + 128);
	var blue  = Math.floor( Math.sin((frequency  /i )   + i *baseIncrementCounter + 10 ) * 127 + 128);
	
	//alert( "rgb("+red+","+green+","+blue+")" );
	document.getElementById("box"+i).style.backgroundColor = "rgb("+(red-100)+","+(green-100)+","+(blue-100)+")";	
	document.getElementById("box"+i).style.boxShadow = -4+"px "+1+"px "+50+"px " + "rgb("+(red-100)+","+(green-100)+","+(blue-100)+")";
}

// Array of all the color sequence functions
var colorSeqFns = [ funckyMultiColorWalk, normalRainbowWalk, normalRainbow ];
/**************************************/

function changeUpBoxColor( increment )
{
	var incrementCounter = baseIncrementCounter;
	
	for( var i = 1; i <= 36; i++ )
	{
		//document.getElementById("box"+i).style.backgroundColor = "rgb("+incrementCounter+","+incrementCounter+","+incrementCounter+")";
		//var red   =  Math.floor(Math.sin( (frequency + incrementCounter ) * i + 0  ) * 127 + 128);
		//funckyMultiColorWalk( i );
		coolBlend(i,baseIncrementCounter);
	}
}

function changeUpTextColors()
{
	for( var i = 0; i <= dbFetches.length; i++ )
	{
		//document.getElementById("box"+i).style.backgroundColor = "rgb("+incrementCounter+","+incrementCounter+","+incrementCounter+")";
		//var red   =  Math.floor(Math.sin( (frequency + incrementCounter ) * i + 0  ) * 127 + 128);
		//funckyMultiColorWalk( i );
		funckyMultiColorWalk( i , textColorBasicIncrementCounter  );
	}
	
	textColorBasicIncrementCounter += .5;
}

function rand(low,high)
{
	// 255 is max rbg value. rand( 0, 255 );
	return Math.floor((Math.random() * high) + low);
}

function randomChangeUpColor()
{
	for( var i = 1; i <= 36; i++ )
	{
		document.getElementById("box"+i).style.backgroundColor = "rgb("+rand(50,110)+","+0+","+0+")";
	}
}

function goCrazy()
{
	if( !areWeCrazy )
	{
		clearInterval(defaultColorChangeHandle);
		randomChangeUpColor();
		setInterval(randomChangeUpColor, 50);
		areWeCrazy = true;
	}
}

function callChangeUpColor()
{
	
	changeUpBoxColor( baseIncrementCounter );
	baseIncrementCounter += .12;
	/*
	if(boolGoingDown)
	{
		baseIncrementCounter -= .1;
	}
	else
	{
		baseIncrementCounter += .1;
	}
	
	if( baseIncrementCounter > maxBaseIncrement )
	{
		// Let's start decrementing. 
		boolGoingDown = true;
		baseIncrementCounter--;
		//alert("Down!");
	}
	else if(baseIncrementCounter < 0 )
	{
		boolGoingDown = false; 
		baseIncrementCounter = 0;
		//alert("Up!");
	}*/

}

function playClickSound()
{
	document.getElementById("click1").play();
}

function submitPost()
{
	$.ajax
	(
		{
		  method: "POST",
		  url: "process.php",
		  data: { action: "setTruth", text:document.getElementById("textIn").value}
		}
	).done(function( msg )
		{
		  document.location = document.location;
		}
	);
}

var avedAjaxResult;
var dbFetches = new Array();
var textColorBasicIncrementCounter = 0;
function getTruths()
{
	document.getElementById("dbFetches").innerHTML = "";
	
	$.ajax
	(
		{
		  method: "POST",
		  url: "process.php",
		  data: { action: "getTruths" }
		}
	).done(function( msg )
		{
		  // Stores value in ajaxResult.
		  //alert(msg);
		  eval( msg );
		  
		  savedAjaxResult = ajaxResult;
		  
		  displayTexts( savedAjaxResult )
		  
		}
	);
	
	function displayTexts( savedAjaxResult )
	{
		for( var i = 0; i < savedAjaxResult.length; i++)
		{
			var tmpDiv = document.createElement("div");
			tmpDiv.setAttribute("class","dbFetch");
			tmpDiv.innerHTML = savedAjaxResult[i] ;
			dbFetches.push( tmpDiv );
			document.getElementById("dbFetches").appendChild( tmpDiv );
		}
	}
}

callChangeUpColor();

defaultColorChangeHandle = setInterval( callChangeUpColor, 50);
getTruths();
setInterval( changeUpTextColors, 50 );



</script>

</body>
</html>
